+function(b){var e=document.createElement("div");b.modalStack=[];b.fn.dataset=function(){var i={},h=this[0].dataset;for(var f in h){var g=(i[f]=h[f]);if(g==="false"){i[f]=false}else{if(g==="true"){i[f]=true}else{if(parseFloat(g)===g*1){i[f]=g*1}}}}return b.extend({},i,this[0].__eleData)};b.fn.data=function(h,m){var k=b(this).dataset();if(!h){return k}if(typeof m==="undefined"){var f=k[h],l=this[0].__eleData;if(l&&(h in l)){return l[h]}else{return f}}else{for(var g=0;g<this.length;g++){var j=this[g];if(h in k){delete j.dataset[h]}if(!j.__eleData){j.__eleData={}}j.__eleData[h]=m}return this}};function a(f,l){var h=f,g,j=this;function k(i){if(i.target!==this){return}l.call(this,i);for(g=0;g<h.length;g++){j.off(h[g],k)}}if(l){for(g=0;g<h.length;g++){j.on(h[g],k)}}}b.fn.transitionEnd=function(f){a.call(this,["webkitTransitionEnd","transitionend"],f);return this};b.modalStackClearQueue=function(){if(b.modalStack.length){(b.modalStack.shift())()}};b.modal=function(l){l=l||{};var m="";var j="";if(l.buttons&&l.buttons.length>0){for(var n=0;n<l.buttons.length;n++){j+='<span class="modal-button'+(l.buttons[n].bold?" modal-button-bold":"")+'">'+l.buttons[n].text+"</span>"}}var k=l.extraClass||"";var h=l.title?'<div class="modal-title">'+l.title+"</div>":"";var f=l.text?'<div class="modal-text">'+l.text+"</div>":"";var o=l.afterText?l.afterText:"";var q=!l.buttons||l.buttons.length===0?"modal-no-buttons":"";var g=l.verticalButtons?"modal-buttons-vertical":"";m='<div class="modal '+k+" "+q+'"><div class="modal-inner">'+(h+f+o)+'</div><div class="modal-buttons '+g+'">'+j+"</div></div>";e.innerHTML=m;var p=b(e).children();b(c.modalContainer).append(p[0]);p.find(".modal-button").each(function(i,r){b(r).on("click",function(s){if(l.buttons[i].close!==false){b.closeModal(p)}if(l.buttons[i].onClick){l.buttons[i].onClick(p,s)}if(l.onClick){l.onClick(p,i)}})});b.openModal(p);return p[0]};b.alert=function(h,g,f){if(typeof g==="function"){f=arguments[1];g=undefined}return b.modal({text:h||"",title:typeof g==="undefined"?c.modalTitle:g,buttons:[{text:c.modalButtonOk,bold:true,onClick:f}]})};b.confirm=function(h,g,f,i){if(typeof g==="function"){i=arguments[2];f=arguments[1];g=undefined}return b.modal({text:h||"",title:typeof g==="undefined"?c.modalTitle:g,buttons:[{text:c.modalButtonCancel,onClick:i},{text:c.modalButtonOk,bold:true,onClick:f}]})};b.prompt=function(h,g,f,i){if(typeof g==="function"){i=arguments[2];f=arguments[1];g=undefined}return b.modal({text:h||"",title:typeof g==="undefined"?c.modalTitle:g,afterText:'<input type="text" class="modal-text-input">',buttons:[{text:c.modalButtonCancel},{text:c.modalButtonOk,bold:true}],onClick:function(k,j){if(j===0&&i){i(b(k).find(".modal-text-input").val())}if(j===1&&f){f(b(k).find(".modal-text-input").val())}}})};b.showPreloader=function(f){b.hidePreloader();b.showPreloader.preloaderModal=b.modal({title:f||c.modalPreloaderTitle,text:'<div class="preloader"></div>'});return b.showPreloader.preloaderModal};b.hidePreloader=function(){b.showPreloader.preloaderModal&&b.closeModal(b.showPreloader.preloaderModal)};b.showIndicator=function(){if(b(".preloader-indicator-modal")[0]){return}b(c.modalContainer).append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')};b.hideIndicator=function(){b(".preloader-indicator-overlay, .preloader-indicator-modal").remove()};b.actions=function(k){var p,f,r;k=k||[];if(k.length>0&&!b.isArray(k[0])){k=[k]}var l;var h="";for(var n=0;n<k.length;n++){for(var m=0;m<k[n].length;m++){if(m===0){h+='<div class="actions-modal-group">'}var o=k[n][m];var q=o.label?"actions-modal-label":"actions-modal-button";if(o.bold){q+=" actions-modal-button-bold"}if(o.color){q+=" color-"+o.color}if(o.bg){q+=" bg-"+o.bg}if(o.disabled){q+=" disabled"}h+='<span class="'+q+'">'+o.text+"</span>";if(m===k[n].length-1){h+="</div>"}}}l='<div class="actions-modal">'+h+"</div>";e.innerHTML=l;p=b(e).children();b(c.modalContainer).append(p[0]);f=".actions-modal-group";r=".actions-modal-button";var g=p.find(f);g.each(function(i,j){var s=i;b(j).children().each(function(u,v){var x=u;var w=k[s][x];var t;if(b(v).is(r)){t=b(v)}if(t){t.on("click",function(y){if(w.close!==false){b.closeModal(p)}if(w.onClick){w.onClick(p,y)}})}})});b.openModal(p);return p[0]};b.toast=function(i,h,f){var g=b('<div class="modal toast '+(f||"")+'">'+i+"</div>").appendTo(document.body);b.openModal(g,function(){setTimeout(function(){b.closeModal(g)},h||2000)})};b.openModal=function(m,f){m=b(m);var l=m.hasClass("modal"),j=!m.hasClass("toast");if(b(".modal.modal-in:not(.modal-out)").length&&c.modalStack&&l&&j){b.modalStack.push(function(){b.openModal(m,f)});return}var o=m.hasClass("popup");var h=m.hasClass("login-screen");var i=m.hasClass("picker-modal");var n=m.hasClass("toast");if(l){m.show();m.css({marginTop:-Math.round(m.outerHeight()/2)+"px"})}if(n){m.css({marginLeft:-Math.round(m.outerWidth()/2/1.185)+"px"})}var g;if(!h&&!i&&!n){if(b(".modal-overlay").length===0&&!o){b(c.modalContainer).append('<div class="modal-overlay"></div>')}if(b(".popup-overlay").length===0&&o){b(c.modalContainer).append('<div class="popup-overlay"></div>')}g=o?b(".popup-overlay"):b(".modal-overlay")}var k=m[0].clientLeft;m.trigger("open");if(i){b(c.modalContainer).addClass("with-picker-modal")}if(!h&&!i&&!n){g.addClass("modal-overlay-visible")}m.removeClass("modal-out").addClass("modal-in").transitionEnd(function(p){if(m.hasClass("modal-out")){m.trigger("closed")}else{m.trigger("opened")}});if(typeof f==="function"){f.call(this)}return true};b.closeModal=function(j){j=b(j||".modal-in");if(typeof j!=="undefined"&&j.length===0){return}var m=j.hasClass("modal"),i=j.hasClass("popup"),f=j.hasClass("toast"),l=j.hasClass("login-screen"),h=j.hasClass("picker-modal"),k=j.hasClass("remove-on-close"),g=i?b(".popup-overlay"):b(".modal-overlay");if(i){if(j.length===b(".popup.modal-in").length){g.removeClass("modal-overlay-visible")}}else{if(!(h||f)){g.removeClass("modal-overlay-visible")}}j.trigger("close");if(h){b(c.modalContainer).removeClass("with-picker-modal");b(c.modalContainer).addClass("picker-modal-closing")}j.removeClass("modal-in").addClass("modal-out").transitionEnd(function(n){if(j.hasClass("modal-out")){j.trigger("closed")}else{j.trigger("opened")}if(h){b(c.modalContainer).removeClass("picker-modal-closing")}if(i||l||h){j.removeClass("modal-out").hide();if(k&&j.length>0){j.remove()}}else{j.remove()}});if(m&&c.modalStack){b.modalStackClearQueue()}return true};function d(j){var i=b(this);var g=i.attr("href");var h=i.dataset();var f;if(i.hasClass("open-popup")){if(h.popup){f=h.popup}else{f=".popup"}b.popup(f)}if(i.hasClass("close-popup")){if(h.popup){f=h.popup}else{f=".popup.modal-in"}b.closeModal(f)}if(i.hasClass("modal-overlay")){if(b(".modal.modal-in").length>0&&c.modalCloseByOutside){b.closeModal(".modal.modal-in")}if(b(".actions-modal.modal-in").length>0&&c.actionsCloseByOutside){b.closeModal(".actions-modal.modal-in")}}if(i.hasClass("popup-overlay")){if(b(".popup.modal-in").length>0&&c.popupCloseByOutside){b.closeModal(".popup.modal-in")}}}b(document).on("click"," .modal-overlay, .popup-overlay, .close-popup, .open-popup, .close-picker",d);var c=b.modal.prototype.defaults={modalStack:true,modalButtonOk:"确定",modalButtonCancel:"取消",modalPreloaderTitle:"加载中",modalContainer:document.body?document.body:"body"}}(jQuery);
